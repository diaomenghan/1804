案例练习,准备:
            rht-vmctl  reset  classroom
            rht-vmctl  reset  server
	    rht-vmctl  reset  desktop
########################################################################

案例1:为虚拟机 server0 配置以下静态地址参数
C 主机名:server0.example.com
C IP地址:172.25.0.112
C 子网掩码:255.255.255.0
C 默认网关:172.25.0.254
C DNS服务器:172.25.254.254
[root@server0 ~]# echo server0.example.com > /etc/hostname
[root@server0 ~]# nmcli connection show
[root@server0 ~]# nmcli connection modify 'System eth0' ipv4.method manual ipv4.addresses '172.25.0.112/24 172.25.0.254' connection.autuconnect yes
[root@server0 ~]# nmcli connection up 'System eth0' 
[root@room9pc01 ~]# ssh -X root@172.25.0.112
[root@server0 ~]# echo nameserver 172.25.254.254 > /etc/resolv.conf 
[root@server0 ~]# nslookup server.example.com


案例2:指定yum软件源
为 server0 指定可用的 yum 软件源
C YUM软件库的地址为 http://classroom.example.com/content/rhel7.0/x86_64/dvd
C 将此配置为虚拟机 server0 的默认软件仓库
C 确认可用的仓库列表
C 利用yum仓库安装httpd
[root@server0 ~]# rm -rf /etc/yum.repos.d/*
[root@server0 ~]# vim /etc/yum.repos.d/dvd.repo
[root@server0 ~]# cat /etc/yum.repos.d/dvd.repo
[dvd]
name=dvd
baseurl=http://classroom.example.com/content/rhel7.0/x86_64/dvd
enabled=1
gpgcheck=0
[root@server0 ~]# yum repolist 
[root@server0 ~]# yum -y install httpd

案例3：虚拟机 server0上操作，复制、粘贴、移动
 利用root用户，在根目录下新建/admin目录，在此目录下新建nsd.txt文件，并进一步完成下列操作

 1）将“I am  King ”写入到文件nsd.txt 
 2）将nsd.txt重命名为love.txt
 3）将/etc/redhat-release文件内容，追加写入到love.txt
 4）将/etc/fstab、/boot、/etc/rc.d/rc.local同时拷贝到/admin目录下
 5）将ifconfig命令的前两行内容，追加写入love.txt
 6）将主机名永久配置文件，拷贝到/admin目录下
 7）将DNS永久配置文件，拷贝到/admin目录下
 8）将/opt目录，拷贝到/admin目录下重命名为nsd
 9）将/admin/love.txt文件，拷贝到/admin/nsd目录下重命名为abc.txt
 10）删除/admin目录
 11）创建文件/root/student.txt
 12）创建文件/root/default.txt
 13）创建文件/root/pxelinux.txt
[root@server0 ~]# mkdir /admin
[root@server0 ~]# touch /admin/nsd.txt
[root@server0 ~]# echo I am King > /admin/nsd.txt
[root@server0 ~]# cat /admin/nsd.txt
I am King
[root@server0 ~]# mv /admin/nsd.txt /admin/love.txt
[root@server0 ~]# cat /etc/redhat-release  >> /admin/love.txt
[root@server0 ~]# cp -r /etc/fstab /boot/ /etc/rc.d/rc.local /admin
[root@server0 ~]# ls /admin
boot  fstab  love.txt  rc.local
[root@server0 ~]# ifconfig | head -2 >> /admin/love.txt 
[root@server0 ~]# cp /etc/hostname /admin/
[root@server0 ~]# cp /etc/resolv.conf /admin/
[root@server0 ~]# cp -r /opt/ /admin/nsd
[root@server0 ~]# cp /admin/love.txt  /admin/nsd/abc.txt
[root@server0 ~]# rm -rf /admin
[root@server0 ~]# touch /root/student.txt
[root@server0 ~]# touch /root/default.txt
[root@server0 ~]# touch /root/pxelinux.txt


案例4:虚拟机 server0上操作，查找并处理文件
C 创建目录/root/findfiles
C 利用find查找所有用户 student 拥有的文件,把它们拷贝到 /root/findfiles/ 文件夹中
C 利用find查找/boot目录下大于10M并且必须是文件，拷贝到/opt
C 利用find查找/boot/目录下以 vm 开头且必须是文件，拷贝到/opt
C 利用find查找，显示/boot目录下所有目录
C 利用find查找，将/root目录下所有以 “.txt”结尾并且必须是文件，把它们拷贝到 /mnt 文件夹中
C 利用find查找，显示/etc目录下所有以 “.conf”结尾并且必须是文件
C 利用find查找，显示/etc目录下所有以 “tab”结尾并且必须是文件
[root@server0 ~]# mkdir /root/findfiles
[root@server0 ~]# find / -user student -type f -exec cp {} /root/findfiles \;
[root@server0 ~]# find /boot/ -size +10M -type f -exec cp {} /opt \;
[root@server0 ~]# find /boot/ -name "vm*" -type f -exec cp {} /opt \;
[root@server0 ~]# find /boot -type d
[root@server0 ~]# find /root -name "*.txt" -type f -exec cp {} /mnt/ \;
[root@server0 ~]# find /etc/ -name "*.conf" -type f
[root@server0 ~]# find /etc/ -name "*tab" -type f

案例5:虚拟机 server0上操作,查找并提取文件内容
1.在文件 /usr/share/dict/words 中查找到所有包含字符串 seismic 的行,将输出信息,写入到/opt/nsd.txt
2.将/etc/login.defs文件有效配置 写入到/root/login.txt
3.提取/etc/passwd以root开头的行，将其信息写入/opt/admin.txt
[root@server0 ~]# grep 'seismic' /usr/share/dict/words  > /opt/nsd.txt
[root@server0 ~]# cat /opt/nsd.txt
[root@server0 ~]# grep -v '^$' /etc/login.defs | grep -v '^#' > /root/login.txt
[root@server0 ~]# cat /root/login.txt
[root@server0 ~]# grep '^root' /etc/passwd > /opt/admin.txt
[root@server0 ~]# cat /opt/admin.txt


案例6:虚拟机 server0上操作,tar制作/释放归档压缩包（zcf、ztf、zxf、jcf、jtf、jxf、cf、tf）
    1）备份/boot、/home这两个文件夹，保存为boothome.tar.gz文件
    2）查看boothome.tar.gz文件内包含哪些内容 
    3）将boothome.tar.gz释放到文件夹/root/boothome/下
    4）创建一个名为 /root/backup.tar.bz2 的归档文件，其中包含 /usr/local 目录中的内容
[root@server0 ~]# tar -zcPf boothome.tar.gz /boot/ /home/
[root@server0 ~]# ls
[root@server0 ~]# tar -tf boothome.tar.gz 
[root@server0 ~]# mkdir /root/boothome 
[root@server0 ~]# tar -xf boothome.tar.gz -C /root/boothome
[root@server0 ~]# ls /root/boothome
[root@server0 ~]# tar -jcPf /root/backup.tar.bz2 /usr/local/
[root@server0 ~]# ls /root/backup.tar.bz2 

案例7:虚拟机 server0上操作
	新建用户 wangwu，其用户ID为1234，密码是fedora 
	创建下列用户、组以及组的成员关系： 
	 C 一个名为 stdent 的组 
	 C 一个名为 natasha 的用户，其属于 stdent 组， 这个组是该用户的从属组 
	 C 一个名为 harry 的用户，其属于 stdent 组，这个 组是该用户的从属组 
	 C 一个名为 sarah 的用户，其在系统中没有可交互的 Shell（/sbin/nologin），并且不是 adminuser 组的成员 
	 C natasha 、harry、sarah 的密码都要设置为 fedora 
[root@server0 ~]# useradd -u 1234 wangwu
[root@server0 ~]# id wangwu
uid=1234(wangwu) gid=1234(wangwu) 组=1234(wangwu)
[root@server0 ~]# echo fedora | passwd --stdin wangwu 
[root@server0 ~]# groupadd stdent
[root@server0 ~]# useradd -G stdent natasha
[root@server0 ~]# id natasha
uid=1235(natasha) gid=1236(natasha) 组=1236(natasha),1235(stdent)
[root@server0 ~]# useradd -G stdent harry
[root@server0 ~]# id harry
uid=1236(harry) gid=1237(harry) 组=1237(harry),1235(stdent)
[root@server0 ~]# useradd -s /sbin/nologin sarah
[root@server0 ~]# grep 'sarah' /etc/passwd



案例8:虚拟机 server0上操作
    为用户 harry 配置一个定时任务 
	C 每天在本地时间 14:23 执行 
	C 需要完成的任务操作为 /bin/echo  hiya
[root@server0 ~]# crontab -e -u harry

案例9:虚拟机 server0上操作
	将文件 /etc/fstab 拷贝为 /var/tmp/fstab，并调整文件 /var/tmp/fstab权限 
	满足以下要求：
	C 此文件的拥有者是 root 
	C 此文件属于 root 组 
	C 此文件对任何人都不可执行 
	C 用户 natasha 能够对此文件执行读和写操作 
	C 用户 harry 对此文件既不能读，也不能写 
	C 所有其他用户（当前的和将来的）能够对此文件进行 读操作
[root@server0 ~]# cp /etc/fstab  /var/tmp/
[root@server0 ~]# ls -ld /var/tmp/fstab 
-rw-r--r--. 1 root root 313 3月  17 14:26 /var/tmp/fstab
[root@server0 ~]# setfacl -m u:natasha:rw /var/tmp/fstab
[root@server0 ~]# setfacl -m u:harry:--- /var/tmp/fstab
[root@server0 ~]# getfacl /var/tmp/fstab

案例10:虚拟机 server0上操作
	创建一个共用目录 /home/admins，要求如下： 
	 C 此目录的组所有权是 student 
	 C student 组的成员对此目录有读写和执行的权限，除此以外的其他所有用户没有任何权限
	 C 在此目录中创建的文件，其组的所有权会自动设置为 属于 student 组
[root@server0 ~]# mkdir /home/admins
[root@server0 ~]# chown :student /home/admins
[root@server0 ~]# ls -ld /home/admins
drwxr-xr-x. 2 root student 6 3月  17 14:29 /home/admins
[root@server0 ~]# chmod g=rwx,uo=--- /home/admins
[root@server0 ~]# ls -ld /home/admins
d---rwx---. 2 root student 6 3月  17 14:29 /home/admins
[root@server0 ~]# chmod g+s /home/admins
[root@server0 ~]# ls -ld /home/admins
d---rws---. 2 root student 6 3月  17 14:29 /home/admins


案例11：虚拟机 server0上操作,绑定到LDAP验证服务

 C  使用系统 classroom.example.com 提供的LDAP服务
 C  验证服务的基本DN是：dc=example,dc=com
 C  账户信息和验证信息都是由 LDAP 提供的
 C  连接要使用证书加密，证书可以在下面的链接下载：
      http://classroom.example.com/pub/example-ca.crt 
 C  确认本地可以识别ldapuser12用户
[root@server0 ~]# yum -y install sssd
[root@server0 ~]# yum -y install authconfig-gtk.x86_64 
[root@server0 ~]# authconfig-gtk 
[root@server0 ~]# systemctl restart sssd
[root@server0 ~]# systemctl enable sssd
[root@server0 ~]# id ldapuser0

案例12：虚拟机 server0上操作,访问NFS共享
 C  查看classroom.example.com的NFS共享
 C  将classroom.example.com的NFS共享目录，挂载到本地/home/guests

[root@server0 ~]# showmount -e classroom.example.com
Export list for classroom.example.com:
/home/guests 172.25.0.0/255.255.0.0
[root@server0 ~]# mkdir /home/guests
[root@server0 ~]# mount classroom.example.com:/home/guests/ /home/guests/
[root@server0 ~]# ls /home/guests/
[root@server0 ~]# su - ldapuser0
上一次登录：六 3月 17 14:36:25 CST 2018pts/1 上
[ldapuser0@server0 ~]$ 














































